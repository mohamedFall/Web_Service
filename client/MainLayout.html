<template name="MainLayout">
    <head>
        <title>TheMovieProject</title>
        <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    </head>
    <main>
        {{> Template.dynamic template=main }}
    </main>

    <script>
        $(document).ready(function (){
            $('.modal').modal();
        })
    </script>
</template>

<template name="Results">
    <h1 class="center">Results List</h1>

    <div class="container">
        <div class="row">
            {{#each queryMovies}}
                <div class="col s12 m4 l3">
                    <div class="card">
                        <div class="card-image">
                            <a href="{{pathFor 'Movie' _id=id}}">
                                <img class="responsive-img" style="height: 300px;" src="https://www.themoviedb.org/t/p/w440_and_h660_face{{poster_path}}">
                                <a class="btn-floating halfway-fab waves-effect waves-light grey"><i class="material-icons">visibility</i></a>
                                <span class="card-title ">{{title}}</span>
                            </a>
                        </div>
                        <div class="card-content">
                            <p class="" style="height: 50px; overflow: hidden;">{{overview}}</p>
                        </div>
                        <div class="card-action">
                            <div style="display: flex; align-items: center;">
                                <button style="border: none; background: none; cursor: pointer;" data-id="{{id}}"><i class="material-icons red-text">favorite</i></button>
                                <span>{{like}}</span>
                            </div>
                        </div>
                    </div>
                </div>
            {{/each}}
        </div>
    </div>
</template>

<template name="MoviePage">
    <div class="row" style="display: flex; justify-content: center; align-items: center; flex-direction: column;">
        <h1 class="center">{{movie.title}}</h1>
        <a class="btn modal-trigger center show-preview" data-id="{{movie.id}}" data-target="previewModal">Bande Annonce</a>
        {{> PreviewModal }}
    </div>

    <div class="container center" style="display: flex; justify-content: center; flex-direction: column;">
        <div class="row">
            <div class="col s12 m4 l12">
                <div class="card">
                    <div class="card-image">
                        <img class="responsive-img" style="height: 400px; " src="https://www.themoviedb.org/t/p/w440_and_h660_face{{movie.poster_path}}">
                    </div>
                </div>
            </div>
            <div class="col l12 s12">
                <div style="display: flex; align-items: center; justify-content: center;">
                    <button style="border: none; background: none; cursor: pointer;" data-id="{{movie.id}}"><i class="material-icons large red-text">favorite</i></button>
                    <span>{{movie.like}}</span>
                </div>
            </div>
        </div>
        <div class="row">
            <p class="" style="overflow: hidden;">{{movie.overview}}</p>
        </div>
    </div>
</template>

<template name="PreviewModal">
    <div class="modal" id="previewModal">
        <div class="modal-content">
            <h3>Preview video</h3>
            <iframe id ="Iframe" width="100%" height="500"
                    src="">
            </iframe>
        </div>
        <div class="modal-footer">
            <a href="#!" class="modal-close waves-effect waves-green btn-flat">Fermer</a>
        </div>
    </div>
</template>